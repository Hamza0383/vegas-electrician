(function(){'use strict';document.addEventListener('DOMContentLoaded',init);function init(){const navToggle=document.querySelector('.nav-toggle');const navMenu=document.querySelector('.nav-menu');const dropdownParents=document.querySelectorAll('.has-dropdown');const dropdownToggles=document.querySelectorAll('.dropdown-toggle');if(!navToggle||!navMenu)return;navToggle.addEventListener('click',function(){const isExpanded=navToggle.getAttribute('aria-expanded')==='true';navToggle.setAttribute('aria-expanded',!isExpanded);navMenu.classList.toggle('active');const buttonText=navToggle.querySelector('.visually-hidden');if(buttonText){buttonText.textContent=isExpanded?'Open menu':'Close menu';}if(isExpanded){dropdownParents.forEach(function(dropdown){dropdown.classList.remove('active');});}});dropdownToggles.forEach(function(toggle){toggle.addEventListener('click',function(e){const parentDropdown=toggle.closest('.has-dropdown');if(window.innerWidth>768){e.preventDefault();return;}e.preventDefault();e.stopPropagation();dropdownParents.forEach(function(dropdown){if(dropdown!==parentDropdown){dropdown.classList.remove('active');}});if(parentDropdown.classList.contains('active')){parentDropdown.classList.remove('active');}else{parentDropdown.classList.add('active');}});});document.addEventListener('click',function(e){const clickedInsideNav=navToggle.contains(e.target)||navMenu.contains(e.target);if(!clickedInsideNav&&navMenu.classList.contains('active')){navMenu.classList.remove('active');navToggle.setAttribute('aria-expanded','false');const buttonText=navToggle.querySelector('.visually-hidden');if(buttonText){buttonText.textContent='Open menu';}dropdownParents.forEach(function(dropdown){dropdown.classList.remove('active');});}});document.addEventListener('keydown',function(e){if(e.key==='Escape'&&navMenu.classList.contains('active')){navMenu.classList.remove('active');navToggle.setAttribute('aria-expanded','false');navToggle.focus();const buttonText=navToggle.querySelector('.visually-hidden');if(buttonText){buttonText.textContent='Open menu';}dropdownParents.forEach(function(dropdown){dropdown.classList.remove('active');});}});const navLinks=navMenu.querySelectorAll('a');navLinks.forEach(function(link){if(link.classList.contains('dropdown-toggle'))return;link.addEventListener('click',function(){if(window.innerWidth>768)return;navMenu.classList.remove('active');navToggle.setAttribute('aria-expanded','false');const buttonText=navToggle.querySelector('.visually-hidden');if(buttonText){buttonText.textContent='Open menu';}dropdownParents.forEach(function(dropdown){dropdown.classList.remove('active');});});});highlightActivePage();function highlightActivePage(){const currentPath=window.location.pathname;const currentPage=currentPath.substring(currentPath.lastIndexOf('/')+1)||'index.html';navLinks.forEach(function(link){const linkPath=link.getAttribute('href');link.classList.remove('active');if(linkPath===currentPage||(currentPage===''&&linkPath==='index.html')||(currentPage==='/'&&linkPath==='index.html')){link.classList.add('active');}});}}})();
